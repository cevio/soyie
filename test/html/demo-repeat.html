<div class="channel-title">说明：</div>
<section class="pad" style="padding-top:10px;">
    <h6><code>es-repeat</code> 循环绑定指令</h6>
    <p>循环绑定指令是这个框架中最复杂的一个部门，涉及的知识点非常多。我们不仅仅要考虑如controller层的逻辑，同时也要考虑层级之间的parent指针。而且更主要的是区分别名变量和真实变量。每个repeat区域都是一个内部闭包，同时也联通了上一层的repeat闭包。在文档节点碎片上还需要考虑节点对数据的依赖关系，通过表达式的正则匹配来做到以来关系提取。可谓复杂中的复杂。repeat目前已经完全可用，但是不外乎一些不为人知的bug存在，所以在接下来的优化工作中，我们主要是对repeat的进一步逻辑检测。</p>
    <p><code>es-repeat=“item in scope.list”</code> repeat指令的语法如此。但是如果仅仅这样写也是可以的:<code>es-repeat=“scope.list”</code> 那么这里多item就是默认的$this别名变量。至于接下去就是普通标签的变量写法了。这里就不做介绍。但是我需要提一下的是：默认存在这些别名变量<code>$this:循环变量的单块数据的别名变量</code> <code>$index:当前数据的索引别名变量</code> <code>$parent:当前单块数据的上一层级数据的别名变量</code> 如果我们学会使用了这些变量，我们能对repeat循环做到最大的优化。</p>
    <p>我们来看一个演示吧!</p>
</section>

<div class="channel-title">数据：</div>
<section class="pad" style="padding-top:10px;">
    <pre><code class="lang-json hljs">{
        "title": "复杂的循环绑定",
        "lv": 2,
        "subject": "我的评论列表",
        "stitle": "诗意如画",
        "data": [
        { "name": "evio", "time": "2015-01-01", "content": "文字很美，再接再厉。", "reply": [
        { "name": "jack", "time": "2015-01-02", "content": "确实不错的文字" },
        { "name": "molear", "time": "2015-01-03", "content": "感觉像郭敬明的文字" },
        { "name": "joyo", "time": "2015-01-04", "content": "如果能更感人一些就更好了。不过还是希望楼主加油！" }
        ]},
        { "name": "Tommy", "time": "2015-01-05", "content": "这样的文字只应天上有，哈哈，给你点个赞！", "reply": [
        { "name": "Roop", "time": "2015-01-06", "content": "是的，让我想起来，曾经的美好，感慨万千啊。" },
        { "name": "Jitsition", "time": "2015-01-07", "content": "冥冥之中自由安排吧，我相信，我也相信的文字。" },
        { "name": "monitor Lee", "time": "2015-01-08", "content": "有点复古，有点忧伤，把我们都待会到了那个曾经属于我们的时代。事实证明，美好是存在的。" }
        ]},
        { "name": "Kissoo", "time": "2015-01-09", "content": "有种想哭的冲动，越来越强烈，你把自己关在城外，我们在烽火台上缄默凝望。习惯了你的文字，同时也习惯了你的忧伤！", "reply": [
        { "name": "VERTO", "time": "2015-01-10", "content": "兵荒马乱的时候，我只能想起你。" },
        { "name": "DISTENCE", "time": "2015-01-11", "content": "落英缤纷啊！" },
        { "name": "Where are you!", "time": "2015-01-12", "content": "美文美文！好像雨水溅落在玻璃杯上的清澈。" }
        ]}
        ]
        }</code></pre>
</section>

<div class="channel-title">代码：</div>
<pre><code class="lang-javascript hljs">Soyie('demo-repeat-example', data);</code></pre>
<div class="channel-title">HTML：</div>
<div class="demo-html"></div>
<div class="channel-title">效果：</div>
<div class="sec-demo">
    <div es-controller="demo-repeat-example">
        <section class="pad" style="padding-top:10px;">
            <p><input es-binding="stitle" class="form-control" /></p>
            <p>{{subject}}</p>
            <div es-repeat="item in data" class="comment-box">
                <span class="index label label-success">{{$index + 1}}</span>
                <div class="info">{{item.name}}: <span>{{item.time}}</span></div>
                <div class="words">{{item.content}}<div class="from">发表在《{{$parent.stitle}}》</div></div>
                <div class="reply">
                    <div class="reply-box" es-repeat="detail in item.reply">
                        <span class="index label label-info">{{$index + 1}}</span>
                        <div class="info">{{detail.name}}: <span>{{detail.time}}</span></div>
                        <div class="words">{{detail.content}}
                            <div class="from">{{detail.name}}回复{{$parent.item.name}} - 发表在《{{$parent.$parent
                                .stitle}}》</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
<style>
    .comment-box,
    .comment-box .reply .reply-box{ border-top:1px solid #eee; position: relative; padding-left: 30px; padding-top: 5px;}
    .comment-box .index{ position: absolute; top:10px; left:0px; height: 20px; line-height: 20px;}
    .comment-box .info{ height:30px; line-height: 30px; position: relative; font-weight: bold;}
    .comment-box .info span{ display: block; height: 30px; line-height: 30px; position: absolute; right: 0px; top:0;
        font-weight: normal; color: #ccc;}
    .comment-box .words{ padding-bottom: 10px; color: #777;}
    .comment-box .reply{ padding-left: 15px;}
    .comment-box .words .from{ padding: 3px 0; color: #ddd;}
</style>