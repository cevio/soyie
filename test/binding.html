<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Soyie Demo</title>

    <!-- Bootstrap -->
    <link href="res/css/dist.css" rel="stylesheet" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body es-controller="global">
<div class="layer">
    <div class="wrap">
        <div class="text text-center">正在加载...</div>
    </div>
</div>
<header class="container-fluid">
    <div class="row">
        <div class="tape col-xs-2 text-left btn-back"><i class="fa fa-chevron-left"></i></div>
        <div class="tape col-xs-8 text-center btn-title">{{title}}</div>
        <div class="tape col-xs-2 text-right btn-other"></div>
    </div>
</header>
<div es-controller="demo" id="demo">
    <div class="row">
        <div class="col-md-4">
            <section class="title">演示：</section>
            <section>
                <div class="line title">Input 表单双向绑定:</div>
                <div class="line">Binding Change: <code>Hello {{text}}!</code></div>
                <div class="line">
                    <input type="text" es-binding="text" class="form-control" />
                </div>
                <div class="line tip">请输入您的名字。</div>
            </section>

            <section>
                <div class="line title">Select 表单双向绑定:</div>
                <div class="line">Binding Change: <code>Come home with {{who}}!</code></div>
                <div class="line">
                    <select es-binding="who" class="form-control">
                        <option value="Evio">Evio</option>
                        <option value="Tommy">Tommy</option>
                        <option value="XYBK">XYBK</option>
                    </select>
                </div>
                <div class="line tip">请选择您和谁回家的名字。</div>
            </section>

            <section>
                <div class="line title">Radio 表单双向绑定:</div>
                <div class="line">Binding Change: <code>I agree with {{agree}}!</code></div>
                <div class="line">
                    <input type="radio" value="Evio" es-binding="agree" name="agree" /> Evio
                    <input type="radio" value="Tommy" es-binding="agree" name="agree" /> Tommy
                    <input type="radio" value="XYBK" es-binding="agree" name="agree" /> XYBK
                </div>
                <div class="line tip">请选择您同意谁的观点。</div>
            </section>

            <section>
                <div class="line title">CheckBox 表单双向绑定:</div>
                <div class="line">Binding Change: <code>order tickets? {{correct}}</code></div>
                <div class="line">
                    预定？<input type="checkbox" value="yes" es-binding="correct" />
                </div>
                <div class="line tip">请选择是否要预定机票。</div>
            </section>

            <section>
                <div class="line title">TextArea 表单双向绑定:</div>
                <div class="line">Binding Change: write code</div>
                <pre>{{code}}</pre>
                <div class="line">
                    <textarea class="form-control" es-binding="code" style="height: 150px; resize: none;"></textarea>
                </div>
                <div class="line tip">写入您的代码。</div>
            </section>
        </div>
        <div class="col-md-4">
            <section class="title">代码实例：</section>
            <section><pre>{{renderCode}}</pre></section>
        </div>
        <div class="col-md-4">
            <section class="title">HTML代码：</section>
            <section><pre>{{htmlCode}}</pre></section>
        </div>
    </div>
</div>
<script src="res/js/dist.js"></script>
<script src="../dist/minify.js"></script>
<script type="text/html" id="code">
$.getJSON(context.url, function(data){
    var html = document.getElementById('demo').innerHTML;
    data.renderCode = code;
    data.htmlCode = html;
    var vm = Soyie.define('demo', data);
    vm.watch();
});
</script>
<script>
    (function(tab){
        function init(context, VM){
            var code = document.getElementById('code').innerHTML;
            (new Function('context', 'VM', 'code', code))(context, VM, code);
        }

        function switchTabs(data){
            var ret;
            for ( var i = 0 ; i < data.length ; i++ ){
                if ( data[i].name === tab ){
                    ret = data[i];
                    break;
                }
            }
            return ret;
        }

        $(function(){
            $.getJSON('data/global.html', function(data){
                var locals = switchTabs(data);
                if ( locals ){
                    var globalvm = Soyie('global', locals);
                    $('.layer').addClass('hide');
                    init(locals, globalvm);
                }
            });
        });
    })('binding');
</script>
</body>
</html>