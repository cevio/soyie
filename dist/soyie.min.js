!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.cmd=e()}}(function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){var n=t[s][1][e];return i(n?n:e)},h,h.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){var r=e("./node"),i=e("../utils"),o=e("../data-observer/scope-parent"),s="text,password,tel,color,date,datetime,datetime-local,month,week,time,email,number,range,search,url".split(","),a=t.exports=function(e,t,n){var i=new r(e,t,n),o=(e.type||"NULL").toLowerCase(),c=e.tagName.toUpperCase(),u=null;switch(e.removeAttribute("es-binding"),c){case"INPUT":u=s.indexOf(o)>-1?"Text":"radio"===o?"Radio":"checkbox"===o?"Checkbox":"file"===o?"File":"Common";break;case"SELECT":u="Select";break;case"TEXTAREA":u="Textarea";break;default:u="Common"}return a[u]&&a[u](i),i};a.Textarea=a.Text=function(e){e.stop=!1,e.set=function(e){this.stop?this.stop=!1:this.element.value=e},e.element.addEventListener("input",function(){e.stop=!0,i.set(this.value,o.source||{},e.getRouter())},!1)},a.Select=function(e){e.stop=!1,e.set=function(e){if(this.stop)this.stop=!1;else{var t,n=!1;for(t=0;t<this.element.options.length;t++)if(this.element.options[t].value==e+""){this.element.options[t].selected=!0,n=!0;break}if(!n)for(t=0;t<this.element.options.length;t++)this.element.options[t].selected=!1}},e.element.addEventListener("change",function(){e.stop=!0;var t=this.value;t||(t=this.options[this.selectedIndex].value),i.set(t,o.source||{},e.getRouter())},!1)},a.Checkbox=function(e){e.stop=!1,e.set=function(e){this.stop?this.stop=!1:this.element.value==e+""?this.element.checked=!0:this.element.checked=!1},e.element.addEventListener("change",function(){e.stop=!0;var t=this.value;this.checked||(t=void 0),i.set(t,o.source||{},e.getRouter())},!1)},a.Radio=function(e){e.stop=!1,e.set=function(e){this.stop?this.stop=!1:this.element.value==e+""?this.element.checked=!0:this.element.checked=!1},e.element.addEventListener("change",function(){e.stop=!0;var t=this.value;this.checked||(t=void 0),i.set(t,o.source||{},e.getRouter())},!1)}},{"../data-observer/scope-parent":7,"../utils":17,"./node":5}],2:[function(e,t,n){function r(e){return new Function("scope",";with(scope){\n"+e+"\n};")}var i=e("./node"),o=(e("../utils"),e("../data-observer/scope-parent"));t.exports=function(e,t,n){var s=new i(e,t,n);return s.foo=function(){},s.set=function(){return this.foo=r(this.expression),this.foo.toString()},s.get=function(){var e=r(this.expression);return e.toString()},s.element.addEventListener("click",function(){if("function"==typeof s.foo){var e=s.gruntScope(o.source||{},s.index,s.alias);s.foo.call(this,e)}},!1),e.removeAttribute("es-click"),s}},{"../data-observer/scope-parent":7,"../utils":17,"./node":5}],3:[function(e,t,n){var r=e("./node"),i=e("../utils");t.exports=function(e,t,n){t=i.formatExpression(t);var o=new r(e,t,n);return o.set=function(e){this.element.innerHTML=e},e.removeAttribute("es-html"),o}},{"../utils":17,"./node":5}],4:[function(e,t,n){var r=e("./node"),i=e("../utils");t.exports=function(e,t,n){t=i.formatExpression(t);var o=new r(e,t,n);return o.set=function(e){this.element.src=e},e.removeAttribute("es-src"),o}},{"../utils":17,"./node":5}],5:[function(e,t,n){var r=e("../utils"),i=t.exports=function(e,t,n){this.deep=n,this.expression=t,this.element=e,this.index=null,this.alias=null};Object.defineProperty(i.prototype,"value",{set:function(e){e=this.set(e)||e,this.oldValue=e}}),i.prototype.gruntScope=function(e,t,n){var i=r.get(this.deep.locals,e),o=i;return void 0!==n&&null!==n?(o={},o[n]=o.$this=i,o.$index=t):void 0!==t&&null!==t&&(o.$index=t),o.$parent=this.makeParentScope(e),o},i.prototype.makeParentScope=function(e){var t={},n=function(t,i){t&&t.parent&&(r.mixin(i,r.get(t.pather,e)),t=t.parent,t.parent&&(i.$parent={},n(t,i.$parent)))};return n(this.deep.parent,t),t},i.prototype.get=function(e,t,n){return r.value(this.expression,this.gruntScope(e,t,n))},i.prototype.update=i.prototype.render=function(e,t,n){r.type(t,"Object")?(t=this.index,n=this.alias):(t?this.index=t:t=this.index,n?this.alias=n:n=this.alias);var i=this.get(e,t,n);this.oldValue!==i&&(this.value=i)},i.prototype.getRouter=function(){var e=this.deep.locals,t=this;if(/\$parent/.test(this.expression)){for(var n=this.expression.split(/\$parent\./g),r=n.length-1,i=this.deep.parent,o=0;r>o&&i.parent;o++)i=i.parent;return e=i.pather,n.slice(r).forEach(function(t){e+="['"+t+"']"}),e}return this.expression.split(".").forEach(function(n,r){t.alias&&0===r||(e+="['"+n+"']")}),e}},{"../utils":17}],6:[function(e,t,n){(function(e){!function(e){"use strict";function r(){function e(e){t=e}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var t=[],n={},r=[];return Object.observe(n,e),Array.observe(r,e),n.id=1,n.id=2,delete n.id,r.push(1,2),r.length=0,Object.deliverChangeRecords(e),5!==t.length?!1:"add"!=t[0].type||"update"!=t[1].type||"delete"!=t[2].type||"splice"!=t[3].type||"splice"!=t[4].type?!1:(Object.unobserve(n,e),Array.unobserve(r,e),!0)}function i(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;if("undefined"!=typeof navigator&&navigator.getDeviceStorage)return!1;try{var e=new Function("","return true;");return e()}catch(t){return!1}}function o(e){return+e===e>>>0&&""!==e}function s(e){return+e}function a(e){return e===Object(e)}function c(e,t){return e===t?0!==e||1/e===1/t:U(e)&&U(t)?!0:e!==e&&t!==t}function u(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&122>=t||t>=65&&90>=t?"ident":t>=49&&57>=t?"number":"else"}function h(){}function l(e){function t(){if(!(d>=e.length)){var t=e[d+1];return"inSingleQuote"==p&&"'"==t||"inDoubleQuote"==p&&'"'==t?(d++,r=t,f.append(),!0):void 0}}for(var n,r,i,o,s,a,c,l=[],d=-1,p="beforePath",f={push:function(){void 0!==i&&(l.push(i),i=void 0)},append:function(){void 0===i?i=r:i+=r}};p;)if(d++,n=e[d],"\\"!=n||!t(p)){if(o=u(n),c=J[p],s=c[o]||c["else"]||"error","error"==s)return;if(p=s[0],a=f[s[1]]||h,r=void 0===s[2]?n:s[2],a(),"afterPath"===p)return l}}function d(e){return H.test(e)}function p(e,t){if(t!==K)throw Error("Use Path.get to retrieve path objects");for(var n=0;n<e.length;n++)this.push(String(e[n]));Q&&this.length&&(this.getValueFrom=this.compiledGetValueFromFn())}function f(e){if(e instanceof p)return e;if((null==e||0==e.length)&&(e=""),"string"!=typeof e){if(o(e.length))return new p(e,K);e=String(e)}var t=W[e];if(t)return t;var n=l(e);return n?(t=new p(n,K),W[e]=t,t):Y}function v(e){return o(e)?"["+e+"]":'["'+e.replace(/"/g,'\\"')+'"]'}function b(t){for(var n=0;te>n&&t.check_();)n++;return M&&(e.dirtyCheckCycleCount=n),n>0}function m(e){for(var t in e)return!1;return!0}function _(e){return m(e.added)&&m(e.removed)&&m(e.changed)}function g(e,t){var n,r={},i={},o={};for(n in t){var s=e[n];(void 0===s||s!==t[n])&&(n in e?s!==t[n]&&(o[n]=s):i[n]=void 0)}for(n in e)n in t||(r[n]=e[n]);return Array.isArray(e)&&e.length!==t.length&&(o.length=e.length),{added:r,removed:i,changed:o}}function y(){if(!ne.length)return!1;for(var e=0;e<ne.length;e++)ne[e]();return ne.length=0,!0}function x(){function e(e){t&&t.state_===ae&&!r&&t.check_(e)}var t,n,r=!1,i=!0;return{open:function(n){if(t)throw Error("ObservedObject in use");i||Object.deliverChangeRecords(e),t=n,i=!1},observe:function(t,r){n=t,r?Array.observe(n,e):Object.observe(n,e)},deliver:function(t){r=t,Object.deliverChangeRecords(e),r=!1},close:function(){t=void 0,Object.unobserve(n,e),ie.push(this)}}}function O(e,t,n){var r=ie.pop()||x();return r.open(e),r.observe(t,n),r}function j(){function e(t,o){t&&(t===r&&(i[o]=!0),a.indexOf(t)<0&&(a.push(t),Object.observe(t,n)),e(Object.getPrototypeOf(t),o))}function t(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.object!==r||i[n.name]||"setPrototype"===n.type)return!1}return!0}function n(n){if(!t(n)){var r,i;for(r=0;r<s.length;r++)i=s[r],i.state_==ae&&i.iterateObjects_(e);for(r=0;r<s.length;r++)i=s[r],i.state_==ae&&i.check_()}}var r,i,o=0,s=[],a=[],c={objects:a,get rootObject(){return r},set rootObject(e){r=e,i={}},open:function(t,n){s.push(t),o++,t.iterateObjects_(e)},close:function(e){if(o--,!(o>0)){for(var t=0;t<a.length;t++)Object.unobserve(a[t],n),w.unobservedCount++;s.length=0,a.length=0,r=void 0,i=void 0,oe.push(this),ee===this&&(ee=null)}}};return c}function E(e,t){return ee&&ee.rootObject===t||(ee=oe.pop()||j(),ee.rootObject=t),ee.open(e,t),ee}function w(){this.state_=se,this.callback_=void 0,this.target_=void 0,this.directObserver_=void 0,this.value_=void 0,this.id_=he++}function k(e){w._allObserversCount++,de&&le.push(e)}function A(e){w._allObserversCount--}function C(e){w.call(this),this.value_=e,this.oldObject_=void 0}function S(e){if(!Array.isArray(e))throw Error("Provided object is not an Array");C.call(this,e)}function P(e,t,n){w.call(this),this.object_=e,this.path_=f(t),this.defaultValue_=n,this.directObserver_=void 0}function R(e){w.call(this),this.reportChangesOnOpen_=e,this.value_=[],this.directObserver_=void 0,this.observed_=[]}function N(e){return e}function V(e,t,n,r){this.callback_=void 0,this.target_=void 0,this.value_=void 0,this.observable_=e,this.getValueFn_=t||N,this.setValueFn_=n||N,this.dontPassThroughSet_=r}function T(e,t,n){for(var r={},i={},o=0;o<t.length;o++){var s=t[o];ve[s.type]?(s.name in n||(n[s.name]=s.oldValue),"update"!=s.type&&("add"!=s.type?s.name in r?(delete r[s.name],delete n[s.name]):i[s.name]=!0:s.name in i?delete i[s.name]:r[s.name]=!0)):(console.error("Unknown changeRecord type: "+s.type),console.error(s))}var a;for(a in r)r[a]=e[a];for(a in i)i[a]=void 0;var c={};for(a in n)if(!(a in r||a in i)){var u=e[a];n[a]!==u&&(c[a]=u)}return{added:r,removed:i,changed:c}}function F(e,t,n){return{index:e,removed:t,addedCount:n}}function $(){}function I(e,t,n,r,i,o){return ye.calcSplices(e,t,n,r,i,o)}function D(e,t,n,r){return n>t||e>r?-1:t==n||r==e?0:n>e?r>t?t-n:r-n:t>r?r-e:t-e}function L(e,t,n,r){for(var i=F(t,n,r),o=!1,s=0,a=0;a<e.length;a++){var c=e[a];if(c.index+=s,!o){var u=D(i.index,i.index+i.removed.length,c.index,c.index+c.addedCount);if(u>=0){e.splice(a,1),a--,s-=c.addedCount-c.removed.length,i.addedCount+=c.addedCount-u;var h=i.removed.length+c.removed.length-u;if(i.addedCount||h){if(n=c.removed,i.index<c.index){var l=i.removed.slice(0,c.index-i.index);Array.prototype.push.apply(l,n),n=l}if(i.index+i.removed.length>c.index+c.addedCount){var d=i.removed.slice(c.index+c.addedCount-i.index);Array.prototype.push.apply(n,d)}i.removed=n,c.index<i.index&&(i.index=c.index)}else o=!0}else if(i.index<c.index){o=!0,e.splice(a,0,i),a++;var p=i.addedCount-i.removed.length;c.index+=p,s+=p}}}o||e.push(i)}function G(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r];switch(i.type){case"splice":L(n,i.index,i.removed.slice(),i.addedCount);break;case"add":case"update":case"delete":if(!o(i.name))continue;var a=s(i.name);if(0>a)continue;L(n,a,[i.oldValue],1);break;default:console.error("Unexpected record type: "+JSON.stringify(i))}}return n}function q(e,t){var n=[];return G(e,t).forEach(function(t){return 1==t.addedCount&&1==t.removed.length?void(t.removed[0]!==e[t.index]&&n.push(t)):void(n=n.concat(I(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length)))}),n}var M=e.testingExposeCycleCount,X=r(),Q=i(),U=e.Number.isNaN||function(t){return"number"==typeof t&&e.isNaN(t)},z="__proto__"in{}?function(e){return e}:function(e){var t=e.__proto__;if(!t)return e;var n=Object.create(t);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n},Z="[$_a-zA-Z]",B="[$_a-zA-Z0-9]",H=new RegExp("^"+Z+"+"+B+"*$"),J={beforePath:{ws:["beforePath"],ident:["inIdent","append"],"[":["beforeElement"],eof:["afterPath"]},inPath:{ws:["inPath"],".":["beforeIdent"],"[":["beforeElement"],eof:["afterPath"]},beforeIdent:{ws:["beforeIdent"],ident:["inIdent","append"]},inIdent:{ident:["inIdent","append"],0:["inIdent","append"],number:["inIdent","append"],ws:["inPath","push"],".":["beforeIdent","push"],"[":["beforeElement","push"],eof:["afterPath","push"]},beforeElement:{ws:["beforeElement"],0:["afterZero","append"],number:["inIndex","append"],"'":["inSingleQuote","append",""],'"':["inDoubleQuote","append",""]},afterZero:{ws:["afterElement","push"],"]":["inPath","push"]},inIndex:{0:["inIndex","append"],number:["inIndex","append"],ws:["afterElement"],"]":["inPath","push"]},inSingleQuote:{"'":["afterElement"],eof:["error"],"else":["inSingleQuote","append"]},inDoubleQuote:{'"':["afterElement"],eof:["error"],"else":["inDoubleQuote","append"]},afterElement:{ws:["afterElement"],"]":["inPath","push"]}},K={},W={};p.get=f,p.prototype=z({__proto__:[],valid:!0,toString:function(){for(var e="",t=0;t<this.length;t++){var n=this[t];e+=d(n)?t?"."+n:n:v(n)}return e},getValueFrom:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];if(null==e||!(r in e))return t;e=e[r]}return e},iterateObjects:function(e,t){for(var n=0;n<this.length;n++){if(n&&(e=e[this[n-1]]),!a(e))return;t(e,this[n])}},compiledGetValueFromFn:function(){var e="",t="obj";e+="if (obj != null";for(var n,r=0;r<this.length-1;r++)n=this[r],t+=d(n)?"."+n:v(n),e+=" &&\n    "+t+" != null";n=this[r];var i=d(n),o=i?'"'+n.replace(/"/g,'\\"')+'"':n;return e+=" &&\n    "+o+" in "+t+")\n",t+=i?"."+n:v(n),e+="  return "+t+";\nelse\n  return defaultValue;",new Function("obj","defaultValue",e)},setValueFrom:function(e,t){if(!this.length)return!1;for(var n=0;n<this.length-1;n++){if(!a(e))return!1;e=e[this[n]]}return a(e)?(e[this[n]]=t,!0):!1}});var Y=new p("",K);Y.valid=!1,Y.getValueFrom=Y.setValueFrom=function(){};var ee,te=1e3,ne=[],re=X?function(){return function(e){return Promise.resolve().then(e)}}():function(){return function(e){ne.push(e)}}(),ie=[],oe=[],se=0,ae=1,ce=2,ue=3,he=1;w.prototype={open:function(e,t){if(this.state_!=se)throw Error("Observer has already been opened.");return k(this),this.callback_=e,this.target_=t,this.connect_(),this.state_=ae,this.value_},close:function(){this.state_==ae&&(A(this),this.disconnect_(),this.value_=void 0,this.callback_=void 0,this.target_=void 0,this.state_=ce)},deliver:function(){this.state_==ae&&b(this)},report_:function(e){try{this.callback_.apply(this.target_,e)}catch(t){w._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(t.stack||t))}},discardChanges:function(){return this.check_(void 0,!0),this.value_}};var le,de=!X;w._allObserversCount=0,de&&(le=[]);var pe=!1;e.Platform=e.Platform||{},e.Platform.performMicrotaskCheckpoint=function(){if(!pe&&de){pe=!0;var t,n,r=0;do{r++,n=le,le=[],t=!1;for(var i=0;i<n.length;i++){var o=n[i];o.state_==ae&&(o.check_()&&(t=!0),le.push(o))}y()&&(t=!0)}while(te>r&&t);M&&(e.dirtyCheckCycleCount=r),pe=!1}},de&&(e.Platform.clearObservers=function(){le=[]}),C.prototype=z({__proto__:w.prototype,arrayObserve:!1,connect_:function(e,t){X?this.directObserver_=O(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},copyObject:function(e){var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=e[n];return Array.isArray(e)&&(t.length=e.length),t},check_:function(e,t){var n,r;if(X){if(!e)return!1;r={},n=T(this.value_,e,r)}else r=this.oldObject_,n=g(this.value_,this.oldObject_);return _(n)?!1:(X||(this.oldObject_=this.copyObject(this.value_)),this.report_([n.added||{},n.removed||{},n.changed||{},function(e){return r[e]}]),!0)},disconnect_:function(){X?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},deliver:function(){this.state_==ae&&(X?this.directObserver_.deliver(!1):b(this))},discardChanges:function(){return this.directObserver_?this.directObserver_.deliver(!0):this.oldObject_=this.copyObject(this.value_),this.value_}}),S.prototype=z({__proto__:C.prototype,arrayObserve:!0,copyObject:function(e){return e.slice()},check_:function(e){var t;if(X){if(!e)return!1;t=q(this.value_,e)}else t=I(this.value_,0,this.value_.length,this.oldObject_,0,this.oldObject_.length);return t&&t.length?(X||(this.oldObject_=this.copyObject(this.value_)),this.report_([t]),!0):!1}}),S.applySplices=function(e,t,n){n.forEach(function(n){for(var r=[n.index,n.removed.length],i=n.index;i<n.index+n.addedCount;)r.push(t[i]),i++;Array.prototype.splice.apply(e,r)})},P.prototype=z({__proto__:w.prototype,get path(){return this.path_},connect_:function(){X&&(this.directObserver_=E(this,this.object_)),this.check_(void 0,!0)},disconnect_:function(){this.value_=void 0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},iterateObjects_:function(e){this.path_.iterateObjects(this.object_,e)},check_:function(e,t){var n=this.value_;return this.value_=this.path_.getValueFrom(this.object_,this.defaultValue_),t||c(this.value_,n)?!1:(this.report_([this.value_,n,this]),!0)},setValue:function(e){this.path_&&this.path_.setValueFrom(this.object_,e)}});var fe={};R.prototype=z({__proto__:w.prototype,connect_:function(){if(X){for(var e,t=!1,n=0;n<this.observed_.length;n+=2)if(e=this.observed_[n],e!==fe){t=!0;break}t&&(this.directObserver_=E(this,e))}this.check_(void 0,!this.reportChangesOnOpen_)},disconnect_:function(){for(var e=0;e<this.observed_.length;e+=2)this.observed_[e]===fe&&this.observed_[e+1].close();this.observed_.length=0,this.value_.length=0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},addPath:function(e,t){if(this.state_!=se&&this.state_!=ue)throw Error("Cannot add paths once started.");if(t=f(t),this.observed_.push(e,t),this.reportChangesOnOpen_){var n=this.observed_.length/2-1;this.value_[n]=t.getValueFrom(e)}},addObserver:function(e){if(this.state_!=se&&this.state_!=ue)throw Error("Cannot add observers once started.");if(this.observed_.push(fe,e),this.reportChangesOnOpen_){var t=this.observed_.length/2-1;this.value_[t]=e.open(this.deliver,this)}},startReset:function(){if(this.state_!=ae)throw Error("Can only reset while open");this.state_=ue,this.disconnect_()},finishReset:function(){if(this.state_!=ue)throw Error("Can only finishReset after startReset");return this.state_=ae,this.connect_(),this.value_},iterateObjects_:function(e){for(var t,n=0;n<this.observed_.length;n+=2)t=this.observed_[n],t!==fe&&this.observed_[n+1].iterateObjects(t,e)},check_:function(e,t){for(var n,r=0;r<this.observed_.length;r+=2){var i,o=this.observed_[r],s=this.observed_[r+1];if(o===fe){var a=s;i=this.state_===se?a.open(this.deliver,this):a.discardChanges()}else i=s.getValueFrom(o);t?this.value_[r/2]=i:c(i,this.value_[r/2])||(n=n||[],n[r/2]=this.value_[r/2],this.value_[r/2]=i)}return n?(this.report_([this.value_,n,this.observed_]),!0):!1}}),V.prototype={open:function(e,t){return this.callback_=e,this.target_=t,this.value_=this.getValueFn_(this.observable_.open(this.observedCallback_,this)),this.value_},observedCallback_:function(e){if(e=this.getValueFn_(e),!c(e,this.value_)){var t=this.value_;this.value_=e,this.callback_.call(this.target_,this.value_,t)}},discardChanges:function(){return this.value_=this.getValueFn_(this.observable_.discardChanges()),this.value_},deliver:function(){return this.observable_.deliver()},setValue:function(e){return e=this.setValueFn_(e),!this.dontPassThroughSet_&&this.observable_.setValue?this.observable_.setValue(e):void 0},close:function(){this.observable_&&this.observable_.close(),this.callback_=void 0,this.target_=void 0,this.observable_=void 0,this.value_=void 0,this.getValueFn_=void 0,this.setValueFn_=void 0}};var ve={add:!0,update:!0,"delete":!0},be=0,me=1,_e=2,ge=3;$.prototype={calcEditDistances:function(e,t,n,r,i,o){var s,a,c=o-i+1,u=n-t+1,h=new Array(c);for(s=0;c>s;s++)h[s]=new Array(u),h[s][0]=s;for(a=0;u>a;a++)h[0][a]=a;for(s=1;c>s;s++)for(a=1;u>a;a++)if(this.equals(e[t+a-1],r[i+s-1]))h[s][a]=h[s-1][a-1];else{var l=h[s-1][a]+1,d=h[s][a-1]+1;h[s][a]=d>l?l:d}return h},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,n=e[0].length-1,r=e[t][n],i=[];t>0||n>0;)if(0!=t)if(0!=n){var o,s=e[t-1][n-1],a=e[t-1][n],c=e[t][n-1];o=c>a?s>a?a:s:s>c?c:s,o==s?(s==r?i.push(be):(i.push(me),r=s),t--,n--):o==a?(i.push(ge),t--,r=a):(i.push(_e),n--,r=c)}else i.push(ge),t--;else i.push(_e),n--;return i.reverse(),i},calcSplices:function(e,t,n,r,i,o){var s=0,a=0,c=Math.min(n-t,o-i);if(0==t&&0==i&&(s=this.sharedPrefix(e,r,c)),n==e.length&&o==r.length&&(a=this.sharedSuffix(e,r,c-s)),t+=s,i+=s,n-=a,o-=a,n-t==0&&o-i==0)return[];var u;if(t==n){for(u=F(t,[],0);o>i;)u.removed.push(r[i++]);return[u]}if(i==o)return[F(t,[],n-t)];for(var h=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,n,r,i,o)),l=[],d=t,p=i,f=0;f<h.length;f++)switch(h[f]){case be:u&&(l.push(u),u=void 0),d++,p++;break;case me:u||(u=F(d,[],0)),u.addedCount++,d++,u.removed.push(r[p]),p++;break;case _e:u||(u=F(d,[],0)),u.addedCount++,d++;break;case ge:u||(u=F(d,[],0)),u.removed.push(r[p]),p++}return u&&l.push(u),l},sharedPrefix:function(e,t,n){for(var r=0;n>r;r++)if(!this.equals(e[r],t[r]))return r;return n},sharedSuffix:function(e,t,n){for(var r=e.length,i=t.length,o=0;n>o&&this.equals(e[--r],t[--i]);)o++;return o},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}};var ye=new $,xe=e;"undefined"==typeof n||n.nodeType||("undefined"!=typeof t&&t.exports&&(n=t.exports),xe=n),xe.Observer=w,xe.Observer.runEOM_=re,xe.Observer.observerSentinel_=fe,xe.Observer.hasObjectObserve=X,xe.ArrayObserver=S,xe.ArrayObserver.calculateSplices=function(e,t){return ye.calculateSplices(e,t)},xe.ArraySplice=$,xe.ObjectObserver=C,xe.PathObserver=P,xe.CompoundObserver=R,xe.Path=p,xe.ObserverTransform=V}("undefined"!=typeof e&&e&&"undefined"!=typeof t&&t?e:this||window)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){var r=t.exports=function(){this.locals=null,this.parent=null,this.pather=null,this.router=null};r.source=null},{}],8:[function(e,t,n){var r=e("./observer"),i=e("../utils"),o=t.exports=function(e){this.object=e};o.prototype.inject=function(){this.auto(this.object.source)},o.prototype.auto=function(e,t){var n,o=i.type(e),s=this;switch(t=t||"",o){case"Object":n=new r.ObjectObserver(e),n.open(function(e,n,r,i){Object.keys(e).forEach(function(n){s.addObject(n,e[n],t)}),Object.keys(n).forEach(function(e){s.removeObject(e,i(e),t)}),Object.keys(r).forEach(function(e){s.changeObject(e,r[e],i(e),t)})}),Object.keys(e).forEach(function(n){"$parent"!==n&&s.auto(e[n],t+"['"+n+"']")});break;case"Array":n=new r.ArrayObserver(e),n.open(function(e){e.forEach(function(e){var n=e.index;e.removed.length>0&&e.addedCount>0?s.changeArray(t,n):e.removed.length>0&&0===e.addedCount?s.removeArray(t,n):s.addArray(t,n)})}),e.forEach(function(e,n){s.auto(e,t+"['"+n+"']")})}},o.prototype.addObject=function(e,t,n){"$parent"!==e&&(this.auto(t,n+"['"+e+"']"),i.type(t,"Array")?this.update({router:n+"['"+e+"']",index:-1,type:"add"}):this.update())},o.prototype.removeObject=function(e,t,n){"$parent"!==e&&this.update()},o.prototype.changeObject=function(e,t,n,r){"$parent"!==e&&(this.auto(t,r),this.update())},o.prototype.addArray=function(e,t){var n=i.get(e,this.object.source)[t];this.auto(n,e+"['"+t+"']"),this.update({router:e,index:t,type:"add"})},o.prototype.changeArray=function(e,t){var n=i.get(e,this.object.source)[t];this.auto(n,e+"['"+t+"']"),this.update({router:e,index:t,type:"change"})},o.prototype.removeArray=function(e,t){console.log({router:e,index:t,type:"remove"}),this.update({router:e,index:t,type:"remove"})},o.prototype.update=function(){var e=this.object.source,t=[e].concat(i.slice.call(arguments,0));this.object.objects.forEach(function(e){e.update.apply(e,t)})}},{"../utils":17,"./observer":6}],9:[function(e,t,n){var r=e("./scan-node/index"),i=e("./utils");n.select=function(e){if(!i.type(e,"String"))return e;var t=document.querySelectorAll("[es-controller='"+e+"']");return 0===t.length?null:1===t.length?t[0]:i.slice.call(t,0)},n.controller=function(e){return(new r).all(this.select(e))},n.invoke=function(e,t,n){var r=this.controller(e);return"function"==typeof t&&(n=t,t={}),r.init(t),n&&r.update(n),r}},{"./scan-node/index":12,"./utils":17}],10:[function(e,t,n){var r=e("../utils"),i=t.exports=function(e,t,n,r){this.deep=n,this.expression=t,this.element=e,this.attrnode=r};i.prototype.set=function(e){this.attrnode.nodeValue=e},Object.defineProperty(i.prototype,"value",{set:function(e){this.set(e),this.oldValue=e}}),i.prototype.gruntScope=function(e,t,n){var i=r.get(this.deep.locals,e),o=i;return void 0!==n&&null!==n?(o={},o[n]=o.$this=i,o.$index=t):void 0!==t&&null!==t&&(o.$index=t),o.$parent=this.makeParentScope(e),o},i.prototype.makeParentScope=function(e){var t={},n=function(t,i){t&&t.parent&&(r.mixin(i,r.get(t.pather,e)),t=t.parent,t.parent&&(i.$parent={},n(t,i.$parent)))};return n(this.deep.parent,t),t},i.prototype.get=function(e,t,n){return r.value(this.expression,this.gruntScope(e,t,n))},i.prototype.update=i.prototype.render=function(e,t,n){r.type(t,"Object")?(t=this.index,n=this.alias):(t?this.index=t:t=this.index,n?this.alias=n:n=this.alias);var i=this.get(e,t,n);this.oldValue!==i&&(this.value=i)}},{"../utils":17}],11:[function(e,t,n){var r=e("./attr"),i=e("../utils"),o=t.exports=function(e,t){var n=[];return i.slice.call(e.attributes,0).forEach(function(r){var s=r.nodeName,a=r.nodeValue;"function"==typeof o.commands[s]?n.push(o.commands[s](e,a,t,r)):a.split(i.REGEXP_TAGSPILTOR).length>1&&n.push(o.createNormalAttributeFactory(e,a,t,r))}),n};o.createNormalAttributeFactory=function(e,t,n,o){return t=i.formatExpression(t),new r(e,t,n,o)},o.commands={"es-src":e("../commands/es-src"),"es-html":e("../commands/es-html"),"es-binding":e("../commands/es-binding"),"es-click":e("../commands/es-click")}},{"../commands/es-binding":1,"../commands/es-click":2,"../commands/es-html":3,"../commands/es-src":4,"../utils":17,"./attr":10}],12:[function(e,t,n){var r=e("../utils"),i=e("./attrscan"),o=e("./textscan"),s=e("./repeatscan"),a=e("../data-observer/scope-parent"),c=e("../data-observer/watcher"),u=t.exports=function(){this.objects=[],this.deep=new a,this.deep.locals="",this.deep.pather="",this.deep.router="#",this.element=null,this.source=null};u.prototype.init=function(e){return a.source=this.source=e||{},this.render(this.source).listen()},u.prototype.all=function(e){var t=this;return this.objects=this.objects.concat(i(e,this.deep)),this.element||(this.element=e),r.slice.call(e.childNodes,0).forEach(function(e){if(-1===r.exceptTagNames.indexOf(e.tagName))switch(e.nodeType){case 1:if(!e.hasAttribute("es-controller"))if(e.hasAttribute("es-repeat")){var n=new s(e);n.init(t.deep,!1),t.objects.push(n)}else t.all(e);break;case 3:t.objects=t.objects.concat(o(e,t.deep))}}),this},u.prototype.render=function(e){return this.objects.forEach(function(t){t.render(e)}),this},u.prototype.listen=function(){return this.watcher=new c(this),this.watcher.inject(),this},u.prototype.update=function(e){return e.call(this.source,this.source,this.element),this}},{"../data-observer/scope-parent":7,"../data-observer/watcher":8,"../utils":17,"./attrscan":11,"./repeatscan":14,"./textscan":16}],13:[function(e,t,n){var r=e("./attrscan"),i=e("./textscan"),o=e("../utils"),s=e("../data-observer/scope-parent"),a=t.exports=function(){this.deep=new s,this.constructer=null,this.objects=[],this.parent=null,this.element=null,this.loop=!0};a.prototype.all=function(e){var t=this;return e||(e=this.element),this.objects=this.objects.concat(r(e,this.deep)),o.slice.call(e.childNodes,0).forEach(function(e){if(-1===o.exceptTagNames.indexOf(e.tagName))switch(e.nodeType){case 1:if(e.hasAttribute("es-repeat")){var n=new t.constructer(e);n.init(t.deep,t.parent.useAlias),t.objects.push(n)}else t.all(e);break;case 3:t.objects=t.objects.concat(i(e,t.deep))}}),this},a.prototype.render=function(e,t){var n=this;this.objects.forEach(function(r){r.render(e,t,n.parent.alias)})},a.prototype.rebuild=function(e){this.deep.locals=this.deep.parent.locals+"['"+e+"']",this.index=e},a.prototype.update=function(e,t,n,r){var i=this;r&&r.type?"rebuild"===r.type&&this.objects.forEach(function(r,o){r.alone?(r.deep.parent=i.deep,r.rebuild(),r.update(e,{type:"rebuild"})):(r.deep=i.deep,r.update(e,t,n))}):this.objects.forEach(function(r){r.update(e,t,n)})}},{"../data-observer/scope-parent":7,"../utils":17,"./attrscan":11,"./textscan":16}],14:[function(e,t,n){var r=e("../utils"),i=e("./repeat"),o=e("../data-observer/scope-parent"),s=t.exports=function(e){this.element=e,this.alias=null,this.realy=null,this.deep=new o,this.alone=!0,this.template=null,this.commentStartNode=null,this.commentEndNode=null,this.fragment=document.createDocumentFragment(),this.objects=[],this.oldValue=null};s.prototype.getCommandInVars=function(e,t,n){var i=this.element.getAttribute("es-repeat").trim(),o=r.REGEXP_COMMAND_IN.exec(i);return this.element.removeAttribute("es-repeat"),this.expression=i,this._ALIAS=t,this.useAlias=!0,this.expressExec=!0,this.deep.parent=e,this.deep.pather=e.locals,o?(this.alias=o[1],this.realy=o[2],this.deep.locals=e.locals+r.makeDeepOnRealy(this.realy,t),this.deep.router=e.router+"-"+r.makeRouterOnRealy(this.realy,t),this):(this.expressExec=!1,this.useAlias=!1,this.deep.locals=e.locals+r.makeDeepOnRealy(i,t),this.deep.router=e.router+"-"+r.makeRouterOnRealy(i,t),this)},s.prototype.rebuild=function(){return this.deep.pather=this.deep.parent.locals,this.expressExec?(this.deep.locals=this.deep.parent.locals+r.makeDeepOnRealy(this.realy,this._ALIAS),this):(this.deep.locals=this.deep.parent.locals+r.makeDeepOnRealy(this.expression,this._ALIAS),this)},s.prototype.init=function(e,t){this.getCommandInVars(e,t),this.freeze()},s.prototype.freeze=function(){var e=this.element.cloneNode(!0),t=this.element.parentNode;this.template=e,this.commentStartNode=document.createComment("Repeat Start"),this.commentEndNode=document.createComment("Repeat End"),this.fragment.appendChild(this.commentStartNode),this.fragment.appendChild(this.commentEndNode),t.replaceChild(this.fragment,this.element)},s.prototype.append=function(e){var t=this.deep.locals+"['"+e+"']",n=this.deep.router+"-"+e,r=new i;return r.deep.locals=t,r.deep.router=n,r.deep.parent=this.deep,r.deep.pather=this.deep.pather,r.constructer=s,r.parent=this,r.element=this.template.cloneNode(!0),r.index=e,r.all(),this.commentEndNode.parentNode.insertBefore(r.element,this.commentEndNode),this.objects.push(r),r},s.prototype.remove=function(e){for(var t=this.deep.locals+"['"+e+"']",n=0;n<this.objects.length;n++){var r=this.objects[n];if(r.deep.locals===t){r.element.parentNode.removeChild(r.element),this.objects.splice(n,1);break}}},s.prototype.each=function(e,t){var n=r.get(this.deep.locals,e);if(this.oldValue=n,r.type(n,"Object"))for(var i in n)t.call(this,i,n[i],n);else if(r.type(n,"Array"))for(var o=0;o<n.length;o++)t.call(this,o,n[o],n);return this},s.prototype.render=function(e){return this.each(e,function(t){var n=this.append(t);n.render(e,t)})},s.prototype.update=function(e,t){var n=this;if(t&&t.router&&void 0!==t.index&&t.type&&this.deep.locals===t.router){if("add"===t.type)if(t.index>-1){var r=this.append(t.index);r.render(e,t.index)}else this.render(e);else if("remove"===t.type){this.remove(t.index);var i=this.objects.length-1,o=-1;o=t.index>i?i:t.index,this.objects.slice(o).forEach(function(t,r){t.index=o+r,t.deep.locals=n.deep.locals+"['"+t.index+"']",t.update(e,t.index,t.parent.alias,{type:"rebuild"})});
}else if("change"===t.type){var s=function(e){for(var t=this.deep.locals+"['"+e+"']",n=null,r=0;r<this.objects.length;r++){var i=this.objects[r];if(i.deep.locals===t){n=i;break}}return n}.call(this,t.index);s&&s.update(e,t.index,s.parent.alias)}}else t&&"rebuild"===t.type?this.objects.forEach(function(t,n){t.deep.locals=t.deep.parent.locals+"['"+n+"']",t.deep.pather=t.deep.parent.pather,t.update(e,n,t.parent.alias,{type:"rebuild"})}):this.objects.forEach(function(n){n.update(e,t)})}},{"../data-observer/scope-parent":7,"../utils":17,"./repeat":13}],15:[function(e,t,n){var r=e("../utils"),i=t.exports=function(e,t,n){this.deep=n,this.expression=t,this.element=e,this.index=null,this.alias=null};i.prototype.set=function(e){this.element.nodeValue=e},Object.defineProperty(i.prototype,"value",{set:function(e){this.set(e),this.oldValue=e}}),i.prototype.gruntScope=function(e,t,n){var i=r.get(this.deep.locals,e),o=i;return void 0!==n&&null!==n?(o={},o[n]=o.$this=i,o.$index=t):void 0!==t&&null!==t&&(o.$index=t),o.$parent=this.makeParentScope(e),o},i.prototype.makeParentScope=function(e){var t={},n=function(t,i){t&&t.parent&&(r.mixin(i,r.get(t.pather,e)),t=t.parent,t.parent&&(i.$parent={},n(t,i.$parent)))};return n(this.deep.parent,t),t},i.prototype.get=function(e,t,n){return r.value(this.expression,this.gruntScope(e,t,n))},i.prototype.update=i.prototype.render=function(e,t,n){r.type(t,"Object")?(t=this.index,n=this.alias):(t?this.index=t:t=this.index,n?this.alias=n:n=this.alias);var i=this.get(e,t,n);this.oldValue!==i&&(this.value=i)}},{"../utils":17}],16:[function(e,t,n){var r=e("./text"),i=e("../utils");t.exports=function(e,t){var n=e.textContent,o=document.createDocumentFragment(),s=[];return n.split(i.REGEXP_TAGSPILTOR).forEach(function(e,n){var a=n%2===1,c=a?i.configs.defaultText:e,u=document.createTextNode(c),h=e.trim();a&&h.length>0&&s.push(new r(u,h,t)),o.appendChild(u)}),e.parentNode.replaceChild(o,e),s}},{"../utils":17,"./text":15}],17:[function(e,t,n){function r(e,t,n){for(var i=0;i<e.length;i++){var o=e[i];n>0&&Array.isArray(o)?r(o,t,n-1):t.push(o)}return t}function i(e,t){for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?i(r,t):t.push(r)}return t}function o(e,t){return null==t?i(e,[]):r(e,[],t)}function s(e,t){for(var n=0;e>n;n++)t=t.parent;return t}function a(e,t){return e-t}function c(e,t){if(!Array.isArray(e))throw new TypeError("unique()::invalid input argument. First argument must be an array.");if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError("unique()::invalid input argument. Second argument must be an array.");var n,r,i,o=e.length;if(o){for(t||e.sort(a),n=1,r=0;o>n;n++)i=e[n],e[r]!==i&&(r++,e[r]=i);e.length=r+1}}n.slice=Array.prototype.slice,n.toString=Object.prototype.toString,n.REGEXP_TAGSPILTOR=/\{\{([^\}\}]+)\}\}/g,n.REGEXP_STRING=/(["|'])(.+?)*?\1/g,n.REGEXP_COMMAND_IN=/([^\s]+?)\sin\s(.+)/i,n.REGEXP_PARENT=/(\B\$parent\.)+?[a-zA-z_\.\$0-9]+/g,n.exceptTagNames=["head","script","meta","link","title","script","hr","br"],n.configs={defaultText:""},n.type=function(e,t){var n=this.toString.call(e).split(" ")[1].replace(/\]$/,"");return t?n==t:n},n.mixin=function(e,t,n){for(var r in t)e[r]?n&&(e[r]=t[r]):e[r]=t[r];return e},n.get=function(e,t){try{var n=new Function("scope","return scope"+e);return n(t)||this.configs.defaultText}catch(r){return this.configs.defaultText}},n.set=function(e,t,n){try{var r=new Function("value","scope","scope"+n+"=value;");r(e,t)}catch(i){console.error(i)}},n.value=function(e,t){try{var n=new Function("scope","with(scope){return "+e+"}");return n(t)||this.configs.defaultText}catch(r){return this.configs.defaultText}},n.formatExpression=function(e){var t=[];return e.split(n.REGEXP_TAGSPILTOR).forEach(function(e,n){var r=n%2===1;if(r)t.push("("+e+")");else{var i=e.replace(/\'/g,"\\'");i.length&&t.push("'"+i+"'")}}),t.join(" + ")},n.makeDeepOnRealy=function(e,t){var n=e.split(".");return t?"['"+n.slice(1).join("']['")+"']":"['"+n.join("']['")+"']"},n.makeRouterOnRealy=function(e,t){var n=e.split(".");return t?n.slice(1).join("-"):n.join("-")},n.flatten=o,n.getParentPather=s,n.unique=c},{}]},{},[9])(9)});