!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Soyie=t():e.Soyie=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(13),i=n(1),o=n(17);t.select=function(e){if(!i.type(e,"String"))return e;var t=document.querySelectorAll("[es-controller='"+e+"']");return 0===t.length?null:1===t.length?t[0]:i.slice.call(t,0)},t.controller=function(e){return(new r).all(this.select(e))},t.invoke=function(e,t,n){var r=this.controller(e);return"function"==typeof t&&(n=t,t={}),r.init(t),n&&r.update(n),r},t.ready=function(e){o(e)}},function(e,t){"use strict";function n(e,t,r){for(var i=0;i<e.length;i++){var o=e[i];r>0&&Array.isArray(o)?n(o,t,r-1):t.push(o)}return t}function r(e,t){for(var n=0;n<e.length;n++){var i=e[n];Array.isArray(i)?r(i,t):t.push(i)}return t}function i(e,t){return null==t?r(e,[]):n(e,[],t)}function o(e,t){for(var n=0;e>n;n++)t=t.parent;return t}function s(e,t){return e-t}function a(e,t){if(!Array.isArray(e))throw new TypeError("unique()::invalid input argument. First argument must be an array.");if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError("unique()::invalid input argument. Second argument must be an array.");var n,r,i,o=e.length;if(o){for(t||e.sort(s),n=1,r=0;o>n;n++)i=e[n],e[r]!==i&&(r++,e[r]=i);e.length=r+1}}t.slice=Array.prototype.slice,t.toString=Object.prototype.toString,t.REGEXP_TAGSPILTOR=/\{\{([^\}\}]+)\}\}/g,t.REGEXP_STRING=/(["|'])(.+?)*?\1/g,t.REGEXP_COMMAND_IN=/([^\s]+?)\sin\s(.+)/i,t.REGEXP_PARENT=/(\B\$parent\.)+?[a-zA-z_\.\$0-9]+/g,t.exceptTagNames=["head","script","meta","link","title","script","hr","br"],t.configs={defaultText:""},t.type=function(e,t){var n=this.toString.call(e).split(" ")[1].replace(/\]$/,"");return t?n==t:n},t.mixin=function(e,t,n){for(var r in t)e[r]?n&&(e[r]=t[r]):e[r]=t[r];return e},t.get=function(e,t){try{var n=new Function("scope","return scope"+e),r=n(t);return void 0===r||null===r?this.configs.defaultText:r}catch(i){return this.configs.defaultText}},t.set=function(e,t,n){try{var r=new Function("value","scope","scope"+n+"=value;");r(e,t)}catch(i){console.warn(i)}},t.value=function(e,t){try{var n=new Function("scope","with(scope){return "+e+"}"),r=n(t);return void 0===r||null===r?this.configs.defaultText:r}catch(i){return this.configs.defaultText}},t.formatExpression=function(e){var n=[];return e.split(t.REGEXP_TAGSPILTOR).forEach(function(e,t){var r=t%2===1;if(r)n.push("("+e+")");else{var i=e.replace(/\'/g,"\\'");i.length&&n.push("'"+i+"'")}}),n.join(" + ")},t.makeDeepOnExpression=function(e,t){var n=e.split(".");return(t||"")+"['"+n.join("']['")+"']"},t.flatten=i,t.getParentPather=o,t.unique=a},function(e,t){"use strict";var n=e.exports=function(){this.locals=null,this.parent=null,this.index=null};n.source=null},function(e,t,n){"use strict";var r=n(1),i=e.exports=function(e,t,n){this.parent=n,this.expression=t,this.element=e};Object.defineProperty(i.prototype,"value",{set:function(e){e=this.set(e)||e,this.oldValue=e}}),i.prototype.gruntScope=function(e){var t=r.get(this.parent.deep.locals,e),n=Object.create(t);return n.$index=this.parent.deep.index,/\B\$parent\b\./.test(this.expression)&&(n.$parent=this.makeParentScope(e)),n},i.prototype.makeParentScope=function(e){var t={},n=function i(t,n){t&&t.parent?(t=t.parent,n.$index=t.index,r.mixin(n,r.get(t.locals,e)),n.$parent={},i(t,n.$parent)):r.mixin(n,r.get(t.locals,e))};return n(this.parent.deep,t),t},i.prototype.get=function(e){return r.value(this.expression,this.gruntScope(e))},i.prototype.update=i.prototype.render=function(e){var t=this.get(e);this.oldValue!==t&&(this.value=t)},i.prototype.getRouter=function(){var e=this.parent.deep.locals;if(/\B\$parent\b\./.test(this.expression)){for(var t=this.expression.split(/\B\$parent\b\./g),n=t.length-1,i=this.parent.deep,o=0;n>o&&i.parent;o++)i=i.parent;return e=i.locals,t.slice(n).forEach(function(t){e+="['"+t+"']"}),e}return r.makeDeepOnExpression(this.expression,e)}},function(e,t,n){"use strict";var r=n(12),i=n(1),o=e.exports=function(e,t){var n=[];return i.slice.call(e.attributes,0).forEach(function(r){var s=r.nodeName,a=r.nodeValue;"function"==typeof o.commands[s]?n.push(o.commands[s](e,a,t,r)):a.split(i.REGEXP_TAGSPILTOR).length>1&&n.push(o.createNormalAttributeFactory(e,a,t,r))}),n};o.createNormalAttributeFactory=function(e,t,n,o){return t=i.formatExpression(t),new r(e,t,n,o)},o.commands={"es-src":n(9),"es-html":n(8),"es-binding":n(6),"es-click":n(7)}},function(e,t,n){"use strict";var r=n(16),i=n(1);e.exports=function(e,t){var n=e.textContent,o=document.createDocumentFragment(),s=[];return n.split(i.REGEXP_TAGSPILTOR).forEach(function(e,n){var a=n%2===1,c=a?i.configs.defaultText:e,u=document.createTextNode(c),h=e.trim();a&&h.length>0&&s.push(new r(u,h,t)),o.appendChild(u)}),e.parentNode.replaceChild(o,e),s}},function(e,t,n){"use strict";var r=n(3),i=n(1),o=n(2),s="text,password,tel,color,date,datetime,datetime-local,month,week,time,email,number,range,search,url".split(","),a=e.exports=function(e,t,n){var i=new r(e,t,n),o=(e.type||"NULL").toLowerCase(),c=e.tagName.toUpperCase(),u=null;switch(e.removeAttribute("es-binding"),c){case"INPUT":u=s.indexOf(o)>-1?"Text":"radio"===o?"Radio":"checkbox"===o?"Checkbox":"file"===o?"File":"Common";break;case"SELECT":u="Select";break;case"TEXTAREA":u="Textarea";break;default:u="Common"}return a[u]&&a[u](i),i};a.Textarea=a.Text=function(e){e.stop=!1,e.set=function(e){this.stop?this.stop=!1:this.element.value=e},e.element.addEventListener("input",function(){e.stop=!0;var t=e.getRouter();i.set(this.value,o.source||{},t)},!1)},a.Select=function(e){e.stop=!1,e.set=function(e){if(this.stop)this.stop=!1;else{var t,n=!1;for(t=0;t<this.element.options.length;t++)if(this.element.options[t].value==e+""){this.element.options[t].selected=!0,n=!0;break}if(!n)for(t=0;t<this.element.options.length;t++)this.element.options[t].selected=!1}},e.element.addEventListener("change",function(){e.stop=!0;var t=this.value;t||(t=this.options[this.selectedIndex].value);var n=e.getRouter();i.set(t,o.source||{},n)},!1)},a.Checkbox=function(e){e.stop=!1,e.set=function(e){this.stop?this.stop=!1:this.element.value==e+""?this.element.checked=!0:this.element.checked=!1},e.element.addEventListener("change",function(){e.stop=!0;var t=this.value;this.checked||(t=void 0);var n=e.getRouter();i.set(t,o.source||{},n)},!1)},a.Radio=function(e){e.stop=!1,e.set=function(e){this.stop?this.stop=!1:this.element.value==e+""?this.element.checked=!0:this.element.checked=!1},e.element.addEventListener("change",function(){e.stop=!0;var t=this.value;this.checked||(t=void 0);var n=e.getRouter();i.set(t,o.source||{},n)},!1)}},function(e,t,n){"use strict";function r(e){return new Function("scope",";with(scope){\n"+e+"\n};")}var i=n(3),o=(n(1),n(2));e.exports=function(e,t,n){var s=new i(e,t,n);return s.foo=function(){},s.set=function(){return this.foo=r(this.expression),this.foo.toString()},s.get=function(){var e=r(this.expression);return e.toString()},s.element.addEventListener("click",function(){if("function"==typeof s.foo){var e=s.gruntScope(o.source||{});s.foo.call(this,e)}},!1),e.removeAttribute("es-click"),s}},function(e,t,n){"use strict";var r=n(3),i=n(1);e.exports=function(e,t,n){t=i.formatExpression(t);var o=new r(e,t,n);return o.set=function(e){this.element.innerHTML=e},e.removeAttribute("es-html"),o}},function(e,t,n){"use strict";var r=n(3),i=n(1);e.exports=function(e,t,n){t=i.formatExpression(t);var o=new r(e,t,n);return o.set=function(e){this.element.src=e},e.removeAttribute("es-src"),o}},function(e,t,n){(function(e,n){"use strict";!function(e){function r(){function e(e){t=e}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var t=[],n={},r=[];return Object.observe(n,e),Array.observe(r,e),n.id=1,n.id=2,delete n.id,r.push(1,2),r.length=0,Object.deliverChangeRecords(e),5!==t.length?!1:"add"!=t[0].type||"update"!=t[1].type||"delete"!=t[2].type||"splice"!=t[3].type||"splice"!=t[4].type?!1:(Object.unobserve(n,e),Array.unobserve(r,e),!0)}function i(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;if("undefined"!=typeof navigator&&navigator.getDeviceStorage)return!1;try{var e=new Function("","return true;");return e()}catch(t){return!1}}function o(e){return+e===e>>>0&&""!==e}function s(e){return+e}function a(e){return e===Object(e)}function c(e,t){return e===t?0!==e||1/e===1/t:M(e)&&M(t)?!0:e!==e&&t!==t}function u(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&122>=t||t>=65&&90>=t?"ident":t>=49&&57>=t?"number":"else"}function h(){}function l(e){function t(){if(!(p>=e.length)){var t=e[p+1];return"inSingleQuote"==d&&"'"==t||"inDoubleQuote"==d&&'"'==t?(p++,r=t,f.append(),!0):void 0}}for(var n,r,i,o,s,a,c,l=[],p=-1,d="beforePath",f={push:function(){void 0!==i&&(l.push(i),i=void 0)},append:function(){void 0===i?i=r:i+=r}};d;)if(p++,n=e[p],"\\"!=n||!t(d)){if(o=u(n),c=J[d],s=c[o]||c["else"]||"error","error"==s)return;if(d=s[0],a=f[s[1]]||h,r=void 0===s[2]?n:s[2],a(),"afterPath"===d)return l}}function p(e){return H.test(e)}function d(e,t){if(t!==K)throw Error("Use Path.get to retrieve path objects");for(var n=0;n<e.length;n++)this.push(String(e[n]));B&&this.length&&(this.getValueFrom=this.compiledGetValueFromFn())}function f(e){if(e instanceof d)return e;if((null==e||0==e.length)&&(e=""),"string"!=typeof e){if(o(e.length))return new d(e,K);e=String(e)}var t=W[e];if(t)return t;var n=l(e);return n?(t=new d(n,K),W[e]=t,t):Y}function v(e){return o(e)?"["+e+"]":'["'+e.replace(/"/g,'\\"')+'"]'}function b(t){for(var n=0;te>n&&t.check_();)n++;return Q&&(e.dirtyCheckCycleCount=n),n>0}function m(e){for(var t in e)return!1;return!0}function _(e){return m(e.added)&&m(e.removed)&&m(e.changed)}function g(e,t){var n,r={},i={},o={};for(n in t){var s=e[n];(void 0===s||s!==t[n])&&(n in e?s!==t[n]&&(o[n]=s):i[n]=void 0)}for(n in e)n in t||(r[n]=e[n]);return Array.isArray(e)&&e.length!==t.length&&(o.length=e.length),{added:r,removed:i,changed:o}}function y(){if(!ne.length)return!1;for(var e=0;e<ne.length;e++)ne[e]();return ne.length=0,!0}function x(){function e(e){t&&t.state_===ae&&!r&&t.check_(e)}var t,n,r=!1,i=!0;return{open:function(n){if(t)throw Error("ObservedObject in use");i||Object.deliverChangeRecords(e),t=n,i=!1},observe:function(t,r){n=t,r?Array.observe(n,e):Object.observe(n,e)},deliver:function(t){r=t,Object.deliverChangeRecords(e),r=!1},close:function(){t=void 0,Object.unobserve(n,e),ie.push(this)}}}function O(e,t,n){var r=ie.pop()||x();return r.open(e),r.observe(t,n),r}function j(){function e(t,o){t&&(t===r&&(i[o]=!0),a.indexOf(t)<0&&(a.push(t),Object.observe(t,n)),e(Object.getPrototypeOf(t),o))}function t(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.object!==r||i[n.name]||"setPrototype"===n.type)return!1}return!0}function n(n){if(!t(n)){var r,i;for(r=0;r<s.length;r++)i=s[r],i.state_==ae&&i.iterateObjects_(e);for(r=0;r<s.length;r++)i=s[r],i.state_==ae&&i.check_()}}var r,i,o=0,s=[],a=[],c=Object.defineProperties({objects:a,open:function(t,n){s.push(t),o++,t.iterateObjects_(e)},close:function(e){if(o--,!(o>0)){for(var t=0;t<a.length;t++)Object.unobserve(a[t],n),w.unobservedCount++;s.length=0,a.length=0,r=void 0,i=void 0,oe.push(this),ee===this&&(ee=null)}}},{rootObject:{get:function(){return r},set:function(e){r=e,i={}},configurable:!0,enumerable:!0}});return c}function E(e,t){return ee&&ee.rootObject===t||(ee=oe.pop()||j(),ee.rootObject=t),ee.open(e,t),ee}function w(){this.state_=se,this.callback_=void 0,this.target_=void 0,this.directObserver_=void 0,this.value_=void 0,this.id_=he++}function k(e){w._allObserversCount++,pe&&le.push(e)}function C(e){w._allObserversCount--}function A(e){w.call(this),this.value_=e,this.oldObject_=void 0}function P(e){if(!Array.isArray(e))throw Error("Provided object is not an Array");A.call(this,e)}function S(e,t,n){w.call(this),this.object_=e,this.path_=f(t),this.defaultValue_=n,this.directObserver_=void 0}function N(e){w.call(this),this.reportChangesOnOpen_=e,this.value_=[],this.directObserver_=void 0,this.observed_=[]}function T(e){return e}function V(e,t,n,r){this.callback_=void 0,this.target_=void 0,this.value_=void 0,this.observable_=e,this.getValueFn_=t||T,this.setValueFn_=n||T,this.dontPassThroughSet_=r}function F(e,t,n){for(var r={},i={},o=0;o<t.length;o++){var s=t[o];ve[s.type]?(s.name in n||(n[s.name]=s.oldValue),"update"!=s.type&&("add"!=s.type?s.name in r?(delete r[s.name],delete n[s.name]):i[s.name]=!0:s.name in i?delete i[s.name]:r[s.name]=!0)):(console.error("Unknown changeRecord type: "+s.type),console.error(s))}var a;for(a in r)r[a]=e[a];for(a in i)i[a]=void 0;var c={};for(a in n)if(!(a in r||a in i)){var u=e[a];n[a]!==u&&(c[a]=u)}return{added:r,removed:i,changed:c}}function R(e,t,n){return{index:e,removed:t,addedCount:n}}function $(){}function I(e,t,n,r,i,o){return ye.calcSplices(e,t,n,r,i,o)}function D(e,t,n,r){return n>t||e>r?-1:t==n||r==e?0:n>e?r>t?t-n:r-n:t>r?r-e:t-e}function L(e,t,n,r){for(var i=R(t,n,r),o=!1,s=0,a=0;a<e.length;a++){var c=e[a];if(c.index+=s,!o){var u=D(i.index,i.index+i.removed.length,c.index,c.index+c.addedCount);if(u>=0){e.splice(a,1),a--,s-=c.addedCount-c.removed.length,i.addedCount+=c.addedCount-u;var h=i.removed.length+c.removed.length-u;if(i.addedCount||h){if(n=c.removed,i.index<c.index){var l=i.removed.slice(0,c.index-i.index);Array.prototype.push.apply(l,n),n=l}if(i.index+i.removed.length>c.index+c.addedCount){var p=i.removed.slice(c.index+c.addedCount-i.index);Array.prototype.push.apply(n,p)}i.removed=n,c.index<i.index&&(i.index=c.index)}else o=!0}else if(i.index<c.index){o=!0,e.splice(a,0,i),a++;var d=i.addedCount-i.removed.length;c.index+=d,s+=d}}}o||e.push(i)}function G(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r];switch(i.type){case"splice":L(n,i.index,i.removed.slice(),i.addedCount);break;case"add":case"update":case"delete":if(!o(i.name))continue;var a=s(i.name);if(0>a)continue;L(n,a,[i.oldValue],1);break;default:console.error("Unexpected record type: "+JSON.stringify(i))}}return n}function q(e,t){var n=[];return G(e,t).forEach(function(t){return 1==t.addedCount&&1==t.removed.length?void(t.removed[0]!==e[t.index]&&n.push(t)):void(n=n.concat(I(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length)))}),n}var Q=e.testingExposeCycleCount,X=r(),B=i(),M=e.Number.isNaN||function(t){return"number"==typeof t&&e.isNaN(t)},z="__proto__"in{}?function(e){return e}:function(e){var t=e.__proto__;if(!t)return e;var n=Object.create(t);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n},U="[$_a-zA-Z]",Z="[$_a-zA-Z0-9]",H=new RegExp("^"+U+"+"+Z+"*$"),J={beforePath:{ws:["beforePath"],ident:["inIdent","append"],"[":["beforeElement"],eof:["afterPath"]},inPath:{ws:["inPath"],".":["beforeIdent"],"[":["beforeElement"],eof:["afterPath"]},beforeIdent:{ws:["beforeIdent"],ident:["inIdent","append"]},inIdent:{ident:["inIdent","append"],0:["inIdent","append"],number:["inIdent","append"],ws:["inPath","push"],".":["beforeIdent","push"],"[":["beforeElement","push"],eof:["afterPath","push"]},beforeElement:{ws:["beforeElement"],0:["afterZero","append"],number:["inIndex","append"],"'":["inSingleQuote","append",""],'"':["inDoubleQuote","append",""]},afterZero:{ws:["afterElement","push"],"]":["inPath","push"]},inIndex:{0:["inIndex","append"],number:["inIndex","append"],ws:["afterElement"],"]":["inPath","push"]},inSingleQuote:{"'":["afterElement"],eof:["error"],"else":["inSingleQuote","append"]},inDoubleQuote:{'"':["afterElement"],eof:["error"],"else":["inDoubleQuote","append"]},afterElement:{ws:["afterElement"],"]":["inPath","push"]}},K={},W={};d.get=f,d.prototype=z({__proto__:[],valid:!0,toString:function(){for(var e="",t=0;t<this.length;t++){var n=this[t];e+=p(n)?t?"."+n:n:v(n)}return e},getValueFrom:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];if(null==e||!(r in e))return t;e=e[r]}return e},iterateObjects:function(e,t){for(var n=0;n<this.length;n++){if(n&&(e=e[this[n-1]]),!a(e))return;t(e,this[n])}},compiledGetValueFromFn:function(){var e="",t="obj";e+="if (obj != null";for(var n,r=0;r<this.length-1;r++)n=this[r],t+=p(n)?"."+n:v(n),e+=" &&\n    "+t+" != null";n=this[r];var i=p(n),o=i?'"'+n.replace(/"/g,'\\"')+'"':n;return e+=" &&\n    "+o+" in "+t+")\n",t+=i?"."+n:v(n),e+="  return "+t+";\nelse\n  return defaultValue;",new Function("obj","defaultValue",e)},setValueFrom:function(e,t){if(!this.length)return!1;for(var n=0;n<this.length-1;n++){if(!a(e))return!1;e=e[this[n]]}return a(e)?(e[this[n]]=t,!0):!1}});var Y=new d("",K);Y.valid=!1,Y.getValueFrom=Y.setValueFrom=function(){};var ee,te=1e3,ne=[],re=X?function(){return function(e){return Promise.resolve().then(e)}}():function(){return function(e){ne.push(e)}}(),ie=[],oe=[],se=0,ae=1,ce=2,ue=3,he=1;w.prototype={open:function(e,t){if(this.state_!=se)throw Error("Observer has already been opened.");return k(this),this.callback_=e,this.target_=t,this.connect_(),this.state_=ae,this.value_},close:function(){this.state_==ae&&(C(this),this.disconnect_(),this.value_=void 0,this.callback_=void 0,this.target_=void 0,this.state_=ce)},deliver:function(){this.state_==ae&&b(this)},report_:function(e){try{this.callback_.apply(this.target_,e)}catch(t){w._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(t.stack||t))}},discardChanges:function(){return this.check_(void 0,!0),this.value_}};var le,pe=!X;w._allObserversCount=0,pe&&(le=[]);var de=!1;e.Platform=e.Platform||{},e.Platform.performMicrotaskCheckpoint=function(){if(!de&&pe){de=!0;var t,n,r=0;do{r++,n=le,le=[],t=!1;for(var i=0;i<n.length;i++){var o=n[i];o.state_==ae&&(o.check_()&&(t=!0),le.push(o))}y()&&(t=!0)}while(te>r&&t);Q&&(e.dirtyCheckCycleCount=r),de=!1}},pe&&(e.Platform.clearObservers=function(){le=[]}),A.prototype=z({__proto__:w.prototype,arrayObserve:!1,connect_:function(e,t){X?this.directObserver_=O(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},copyObject:function(e){var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=e[n];return Array.isArray(e)&&(t.length=e.length),t},check_:function(e,t){var n,r;if(X){if(!e)return!1;r={},n=F(this.value_,e,r)}else r=this.oldObject_,n=g(this.value_,this.oldObject_);return _(n)?!1:(X||(this.oldObject_=this.copyObject(this.value_)),this.report_([n.added||{},n.removed||{},n.changed||{},function(e){return r[e]}]),!0)},disconnect_:function(){X?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},deliver:function(){this.state_==ae&&(X?this.directObserver_.deliver(!1):b(this))},discardChanges:function(){return this.directObserver_?this.directObserver_.deliver(!0):this.oldObject_=this.copyObject(this.value_),this.value_}}),P.prototype=z({__proto__:A.prototype,arrayObserve:!0,copyObject:function(e){return e.slice()},check_:function(e){var t;if(X){if(!e)return!1;t=q(this.value_,e)}else t=I(this.value_,0,this.value_.length,this.oldObject_,0,this.oldObject_.length);return t&&t.length?(X||(this.oldObject_=this.copyObject(this.value_)),this.report_([t]),!0):!1}}),P.applySplices=function(e,t,n){n.forEach(function(n){for(var r=[n.index,n.removed.length],i=n.index;i<n.index+n.addedCount;)r.push(t[i]),i++;Array.prototype.splice.apply(e,r)})},S.prototype=z(Object.defineProperties({__proto__:w.prototype,connect_:function(){X&&(this.directObserver_=E(this,this.object_)),this.check_(void 0,!0)},disconnect_:function(){this.value_=void 0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},iterateObjects_:function(e){this.path_.iterateObjects(this.object_,e)},check_:function(e,t){var n=this.value_;return this.value_=this.path_.getValueFrom(this.object_,this.defaultValue_),t||c(this.value_,n)?!1:(this.report_([this.value_,n,this]),!0)},setValue:function(e){this.path_&&this.path_.setValueFrom(this.object_,e)}},{path:{get:function(){return this.path_},configurable:!0,enumerable:!0}}));var fe={};N.prototype=z({__proto__:w.prototype,connect_:function(){if(X){for(var e,t=!1,n=0;n<this.observed_.length;n+=2)if(e=this.observed_[n],e!==fe){t=!0;break}t&&(this.directObserver_=E(this,e))}this.check_(void 0,!this.reportChangesOnOpen_)},disconnect_:function(){for(var e=0;e<this.observed_.length;e+=2)this.observed_[e]===fe&&this.observed_[e+1].close();this.observed_.length=0,this.value_.length=0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},addPath:function(e,t){if(this.state_!=se&&this.state_!=ue)throw Error("Cannot add paths once started.");if(t=f(t),this.observed_.push(e,t),this.reportChangesOnOpen_){var n=this.observed_.length/2-1;this.value_[n]=t.getValueFrom(e)}},addObserver:function(e){if(this.state_!=se&&this.state_!=ue)throw Error("Cannot add observers once started.");if(this.observed_.push(fe,e),this.reportChangesOnOpen_){var t=this.observed_.length/2-1;this.value_[t]=e.open(this.deliver,this)}},startReset:function(){if(this.state_!=ae)throw Error("Can only reset while open");this.state_=ue,this.disconnect_()},finishReset:function(){if(this.state_!=ue)throw Error("Can only finishReset after startReset");return this.state_=ae,this.connect_(),this.value_},iterateObjects_:function(e){for(var t,n=0;n<this.observed_.length;n+=2)t=this.observed_[n],t!==fe&&this.observed_[n+1].iterateObjects(t,e)},check_:function(e,t){for(var n,r=0;r<this.observed_.length;r+=2){var i,o=this.observed_[r],s=this.observed_[r+1];if(o===fe){var a=s;i=this.state_===se?a.open(this.deliver,this):a.discardChanges()}else i=s.getValueFrom(o);t?this.value_[r/2]=i:c(i,this.value_[r/2])||(n=n||[],n[r/2]=this.value_[r/2],this.value_[r/2]=i)}return n?(this.report_([this.value_,n,this.observed_]),!0):!1}}),V.prototype={open:function(e,t){return this.callback_=e,this.target_=t,this.value_=this.getValueFn_(this.observable_.open(this.observedCallback_,this)),this.value_},observedCallback_:function(e){if(e=this.getValueFn_(e),!c(e,this.value_)){var t=this.value_;this.value_=e,this.callback_.call(this.target_,this.value_,t)}},discardChanges:function(){return this.value_=this.getValueFn_(this.observable_.discardChanges()),this.value_},deliver:function(){return this.observable_.deliver()},setValue:function(e){return e=this.setValueFn_(e),!this.dontPassThroughSet_&&this.observable_.setValue?this.observable_.setValue(e):void 0},close:function(){this.observable_&&this.observable_.close(),this.callback_=void 0,this.target_=void 0,this.observable_=void 0,this.value_=void 0,this.getValueFn_=void 0,this.setValueFn_=void 0}};var ve={add:!0,update:!0,"delete":!0},be=0,me=1,_e=2,ge=3;$.prototype={calcEditDistances:function(e,t,n,r,i,o){var s,a,c=o-i+1,u=n-t+1,h=new Array(c);for(s=0;c>s;s++)h[s]=new Array(u),h[s][0]=s;for(a=0;u>a;a++)h[0][a]=a;for(s=1;c>s;s++)for(a=1;u>a;a++)if(this.equals(e[t+a-1],r[i+s-1]))h[s][a]=h[s-1][a-1];else{var l=h[s-1][a]+1,p=h[s][a-1]+1;h[s][a]=p>l?l:p}return h},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,n=e[0].length-1,r=e[t][n],i=[];t>0||n>0;)if(0!=t)if(0!=n){var o,s=e[t-1][n-1],a=e[t-1][n],c=e[t][n-1];o=c>a?s>a?a:s:s>c?c:s,o==s?(s==r?i.push(be):(i.push(me),r=s),t--,n--):o==a?(i.push(ge),t--,r=a):(i.push(_e),n--,r=c)}else i.push(ge),t--;else i.push(_e),n--;return i.reverse(),i},calcSplices:function(e,t,n,r,i,o){var s=0,a=0,c=Math.min(n-t,o-i);if(0==t&&0==i&&(s=this.sharedPrefix(e,r,c)),n==e.length&&o==r.length&&(a=this.sharedSuffix(e,r,c-s)),t+=s,i+=s,n-=a,o-=a,n-t==0&&o-i==0)return[];var u;if(t==n){for(u=R(t,[],0);o>i;)u.removed.push(r[i++]);return[u]}if(i==o)return[R(t,[],n-t)];for(var h=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,n,r,i,o)),l=[],p=t,d=i,f=0;f<h.length;f++)switch(h[f]){case be:u&&(l.push(u),u=void 0),p++,d++;break;case me:u||(u=R(p,[],0)),u.addedCount++,p++,u.removed.push(r[d]),d++;break;case _e:u||(u=R(p,[],0)),u.addedCount++,p++;break;case ge:u||(u=R(p,[],0)),u.removed.push(r[d]),d++}return u&&l.push(u),l},sharedPrefix:function(e,t,n){for(var r=0;n>r;r++)if(!this.equals(e[r],t[r]))return r;return n},sharedSuffix:function(e,t,n){for(var r=e.length,i=t.length,o=0;n>o&&this.equals(e[--r],t[--i]);)o++;return o},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}};var ye=new $,xe=e;"undefined"==typeof t||t.nodeType||("undefined"!=typeof n&&n.exports&&(t=n.exports),xe=t),xe.Observer=w,xe.Observer.runEOM_=re,xe.Observer.observerSentinel_=fe,xe.Observer.hasObjectObserve=X,xe.ArrayObserver=P,xe.ArrayObserver.calculateSplices=function(e,t){return ye.calculateSplices(e,t)},xe.ArraySplice=$,xe.ObjectObserver=A,xe.PathObserver=S,xe.CompoundObserver=N,xe.Path=d,xe.ObserverTransform=V}("undefined"!=typeof e&&e&&"undefined"!=typeof n&&n?e:window)}).call(t,function(){return this}(),n(18)(e))},function(e,t,n){"use strict";var r=n(10),i=n(1),o=e.exports=function(e){this.object=e,this.listener={}};o.prototype.inject=function(){this.auto(this.object.source)},o.prototype.auto=function(e,t){var n,o=i.type(e),s=this;switch(t=t||"",o){case"Object":n=new r.ObjectObserver(e),n.open(function(e,n,r,i){Object.keys(e).forEach(function(n){s.addObject(n,e[n],t)}),Object.keys(n).forEach(function(e){s.removeObject(e,i(e),t)}),Object.keys(r).forEach(function(e){s.changeObject(e,r[e],i(e),t)})}),Object.keys(e).forEach(function(n){"$parent"!==n&&s.auto(e[n],t+"['"+n+"']")});break;case"Array":n=new r.ArrayObserver(e),n.open(function(n){n.forEach(function(n){var r=n.index;n.removed.length>0&&n.addedCount>0?s.changeArray(t,r):n.removed.length>0&&0===n.addedCount?s.removeArray(t,r,e):s.addArray(t,r)})}),e.forEach(function(e,n){s.auto(e,t+"['"+n+"']")})}this.listener[t]=n},o.prototype.addObject=function(e,t,n){"$parent"!==e&&(this.auto(t,n+"['"+e+"']"),i.type(t,"Array")?this.update({router:n+"['"+e+"']",index:-1,type:"add"}):this.update())},o.prototype.removeObject=function(e,t,n){"$parent"!==e&&(this.update(),this.clear(t,n))},o.prototype.changeObject=function(e,t,n,r){"$parent"!==e&&(this.auto(t,r),this.update())},o.prototype.addArray=function(e,t){var n=i.get(e,this.object.source)[t];this.auto(n,e+"['"+t+"']"),this.update({router:e,index:t,type:"add"})},o.prototype.changeArray=function(e,t){var n=i.get(e,this.object.source)[t];this.auto(n,e+"['"+t+"']"),this.update({router:e,index:t,type:"change"})},o.prototype.removeArray=function(e,t,n){var r=this;this.update({router:e,index:t,type:"remove"}),n.slice(t).forEach(function(n,i){var o=e+"['"+(t+i)+"']",s=e+"['"+(t+1+i)+"']";r.clear(n,s),r.auto(n,o)})},o.prototype.update=function(){var e=this.object.source,t=[e].concat(i.slice.call(arguments,0));this.object.objects.forEach(function(e){e.update.apply(e,t)})},o.prototype.clear=function(e,t){var n=i.type(e);switch(this.listener[t]&&this.listener[t].close(),n){case"Object":for(var r in e)this.clear(e[r],t+"['"+r+"']");break;case"Array":for(var o=0;o<e.length;o++)this.clear(e[o],t+"['"+o+"']")}}},function(e,t,n){"use strict";var r=n(1),i=e.exports=function(e,t,n,r){this.parent=n,this.expression=t,this.element=e,this.attrnode=r};i.prototype.set=function(e){this.attrnode.nodeValue=e},Object.defineProperty(i.prototype,"value",{set:function(e){this.set(e),this.oldValue=e}}),i.prototype.gruntScope=function(e){var t=r.get(this.parent.deep.locals,e),n=Object.create(t);return n.$index=this.parent.deep.index,/\B\$parent\b\./.test(this.expression)&&(n.$parent=this.makeParentScope(e)),n},i.prototype.makeParentScope=function(e){var t={},n=function i(t,n){t&&t.parent?(n.$index=t.index,t=t.parent,r.mixin(n,r.get(t.locals,e)),n.$parent={},i(t,n.$parent)):r.mixin(n,r.get(t.locals,e))};return n(this.parent.deep,t),t},i.prototype.get=function(e){return r.value(this.expression,this.gruntScope(e))},i.prototype.update=i.prototype.render=function(e){var t=this.get(e);this.oldValue!==t&&(this.value=t)}},function(e,t,n){"use strict";var r=n(1),i=n(4),o=n(5),s=n(15),a=n(2),c=n(11),u=e.exports=function(){this.objects=[],this.deep=new a,this.deep.locals="",this.element=null,this.source=null};u.prototype.init=function(e){return a.source=this.source=e||{},this.render(this.source).listen()},u.prototype.all=function(e){var t=this;return this.objects=this.objects.concat(i(e,this)),this.element||(this.element=e),r.slice.call(e.childNodes,0).forEach(function(e){if(-1===r.exceptTagNames.indexOf(e.tagName))switch(e.nodeType){case 1:if(!e.hasAttribute("es-controller"))if(e.hasAttribute("es-repeat")){var n=new s(e);n.parent=t,n.init(),t.objects.push(n)}else t.all(e);break;case 3:t.objects=t.objects.concat(o(e,t))}}),this},u.prototype.render=function(e){return this.objects.forEach(function(t){t.render(e)}),this},u.prototype.listen=function(){return this.watcher=new c(this),this.watcher.inject(),this},u.prototype.update=function(e){return e.call(this.source,this.source,this.element),this}},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(1),s=n(2),a=e.exports=function(){this.deep=new s,this.constructer=null,this.objects=[],this.parent=null,this.element=null,this.loop=!0};Object.defineProperty(a.prototype,"index",{set:function(e){this.deep.parent=this.parent.deep.parent,this.deep.locals=this.parent.deep.locals+"['"+e+"']",this.deep.index=e}}),a.prototype.all=function(e){var t=this;return e||(e=this.element),this.objects=this.objects.concat(r(e,this)),o.slice.call(e.childNodes,0).forEach(function(e){if(-1===o.exceptTagNames.indexOf(e.tagName))switch(e.nodeType){case 1:if(e.hasAttribute("es-repeat")){var n=new t.constructer(e);n.parent=t,n.init(),t.objects.push(n)}else t.all(e);break;case 3:t.objects=t.objects.concat(i(e,t))}}),this},a.prototype.render=function(e){this.objects.forEach(function(t){t.render(e)})},a.prototype.update=function(e,t){t&&t.type&&"rebuild"===t.type?this.objects.forEach(function(n,r){n.alone?n.update(e,{type:"rebuild"}):(n.index=r,n.update(e,t))}):this.objects.forEach(function(n){n.update(e,t)})}},function(e,t,n){"use strict";var r=n(1),i=n(14),o=n(2),s=e.exports=function(e){this.element=e,this.deep=new o,this.alone=!0,this.template=null,this.commentStartNode=null,this.commentEndNode=null,this.fragment=document.createDocumentFragment(),this.objects=[]};s.prototype.format=function(){return this.expression=this.element.getAttribute("es-repeat").trim(),this.element.removeAttribute("es-repeat"),this.rebuild()},s.prototype.rebuild=function(){return this.deep.parent=this.parent.deep,this.deep.locals=this.deep.parent.locals+r.makeDeepOnExpression(this.expression),this},s.prototype.init=function(){this.format(),this.freeze()},s.prototype.freeze=function(){var e=this.element.cloneNode(!0),t=this.element.parentNode;this.template=e,this.commentStartNode=document.createComment("Repeat Start"),this.commentEndNode=document.createComment("Repeat End"),this.fragment.appendChild(this.commentStartNode),this.fragment.appendChild(this.commentEndNode),t.replaceChild(this.fragment,this.element)},s.prototype.append=function(e){var t=new i;return t.constructer=s,t.parent=this,t.element=this.template.cloneNode(!0),t.index=e,t.all(),this.commentEndNode.parentNode.insertBefore(t.element,this.commentEndNode),this.objects.push(t),t},s.prototype.remove=function(e){for(var t=this.deep.locals+"['"+e+"']",n=0;n<this.objects.length;n++){var r=this.objects[n];if(r.deep.locals===t){r.element.parentNode.removeChild(r.element),this.objects.splice(n,1);break}}},s.prototype.each=function(e,t){var n=r.get(this.deep.locals,e);if(this.oldValue=n,r.type(n,"Object"))for(var i in n)t.call(this,i,n[i],n);else if(r.type(n,"Array"))for(var o=0;o<n.length;o++)t.call(this,o,n[o],n);return this},s.prototype.render=function(e){return this.each(e,function(t){var n=this.append(t);
n.render(e,t)})},s.prototype.update=function(e,t){if(t&&t.router&&void 0!==t.index&&t.type&&this.deep.locals===t.router)if("add"===t.type)if(t.index>-1){var n=this.append(t.index);n.render(e)}else this.render(e);else if("remove"===t.type){this.remove(t.index);var r=this.objects.length-1,i=-1;i=t.index>r?r:t.index,this.objects.slice(i).forEach(function(t,n){t.index=i+n,t.update(e,{type:"rebuild"})})}else"change"===t.type&&this.objects[t.index].update(e);else t&&"rebuild"===t.type?(this.rebuild(),this.objects.forEach(function(n,r){n.index=r,n.update(e,t)})):this.objects.forEach(function(n){n.update(e,t)})}},function(e,t,n){"use strict";var r=n(1),i=e.exports=function(e,t,n){this.parent=n,this.expression=t,this.element=e};i.prototype.set=function(e){this.element.nodeValue=e},Object.defineProperty(i.prototype,"value",{set:function(e){this.set(e),this.oldValue=e}}),i.prototype.gruntScope=function(e){var t=r.get(this.parent.deep.locals,e),n=Object.create(t);return n.$index=this.parent.deep.index,/\B\$parent\b\./.test(this.expression)&&(n.$parent=this.makeParentScope(e)),n},i.prototype.makeParentScope=function(e){var t={},n=function i(t,n){t&&t.parent?(n.$index=t.index,t=t.parent,r.mixin(n,r.get(t.locals,e)),n.$parent={},i(t,n.$parent)):r.mixin(n,r.get(t.locals,e))};return n(this.parent.deep,t),t},i.prototype.get=function(e){return r.value(this.expression,this.gruntScope(e))},i.prototype.update=i.prototype.render=function(e){var t=this.get(e);this.oldValue!==t&&(this.value=t)}},function(e,t,n){/*!
	  * domready (c) Dustin Diaz 2014 - License MIT
	  */
!function(t,n){e.exports=n()}("domready",function(){var e,t=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,e=function(){for(n.removeEventListener(i,e),o=1;e=t.shift();)e()}),function(e){o?setTimeout(e,0):t.push(e)}})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});